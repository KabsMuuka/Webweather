<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/allStoredWeather.css" />
    <title>reterived data</title>
  </head>
  <body>
    <div class="container">
      <header>
        <p class="title">Weather App</p>
        <p class="citation">
          Weather api Provided By https://www.weatherapi.com/
        </p>
      </header>
      <a href="./index.html"><button>back</button></a>

      <main>
        <h2>Stored weather data per City</h2>
        <div id="weatherResults"></div>
      </main>

      <script>
        const weatherResults = document.getElementById("weatherResults");
        //fetch data from and render it on a page

        async function fetchData() {
          const response = await fetch("http://localhost:3000/storedData");
          const weatherResponse = await response.json();

          // console.log(weatherResponse);

          weatherResponse.forEach((weather) => {
            //create weather card div element
            const weathercard = document.createElement("div");
            weathercard.classList.add("weather_card");

            weathercard.innerHTML = `
            <p><strong>City :</strong> ${weather.name}</p>
            <p><strong>region :</strong> ${weather.region}</p>
            <p><strong>country :</strong> ${weather.country}</p>
            <p><strong>temp_c :</strong>  ${weather.temp_C} 'c</p>
            <p><strong>condition :</strong>  ${weather.text}</p>
            <p><strong>local time :</strong> ${new Date(
              weather.localtime
            ).toLocaleString()}</p>
             `;
            weatherResults.appendChild(weathercard);
          });
        }
        fetchData();
      </script>

      <footer>
        <span>&copy 2024</span>
        <span>By Kabwali Muuka</span>
      </footer>
    </div>
  </body>
</html>
